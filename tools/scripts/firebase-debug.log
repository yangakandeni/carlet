[debug] [2025-11-10T17:59:08.561Z] ----------------------------------------------------------------------
[debug] [2025-11-10T17:59:08.565Z] Command:       /usr/local/bin/node /usr/local/bin/firebase emulators:start --only auth,firestore,storage --project carlet-dev-6be6a
[debug] [2025-11-10T17:59:08.565Z] CLI Version:   14.24.0
[debug] [2025-11-10T17:59:08.566Z] Platform:      darwin
[debug] [2025-11-10T17:59:08.566Z] Node Version:  v22.18.0
[debug] [2025-11-10T17:59:08.566Z] Time:          Mon Nov 10 2025 19:59:08 GMT+0200 (South Africa Standard Time)
[debug] [2025-11-10T17:59:08.566Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-11-10T17:59:09.263Z] Object "" in "firebase.json" has unknown property: {"additionalProperty":"flutter"}
[debug] [2025-11-10T17:59:09.279Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-11-10T17:59:09.280Z] > authorizing via signed-in user (techoloshe@gmail.com)
[debug] [2025-11-10T17:59:09.446Z] java version "24.0.2" 2025-07-15
Java(TM) SE Runtime Environment (build 24.0.2+12-54)
Java HotSpot(TM) 64-Bit Server VM (build 24.0.2+12-54, mixed mode, sharing)

[debug] [2025-11-10T17:59:09.453Z] Parsed Java major version: 24
[info] i  emulators: Starting emulators: auth, firestore, storage {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: auth, firestore, storage"}}
[debug] [2025-11-10T17:59:11.160Z] [logging] Logging Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2025-11-10T17:59:11.161Z] assigned listening specs for emulators {"user":{"ui":[{"address":"0.0.0.0","family":"IPv4","port":4005}],"auth":[{"address":"0.0.0.0","family":"IPv4","port":9098}],"firestore":[{"address":"0.0.0.0","family":"IPv4","port":8085}],"firestore.websocket":[{"address":"0.0.0.0","family":"IPv4","port":9150}],"storage":[{"address":"0.0.0.0","family":"IPv4","port":9198}],"hub":[{"address":"127.0.0.1","family":"IPv4","port":4401},{"address":"::1","family":"IPv6","port":4401}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4501}]},"metadata":{"message":"assigned listening specs for emulators"}}
[debug] [2025-11-10T17:59:11.169Z] Emulator locator file path: /var/folders/5z/0bmfzr6956v9r69_7_59k8l00000gn/T/hub-carlet-dev-6be6a.json
[debug] [2025-11-10T17:59:11.170Z] [hub] writing locator at /var/folders/5z/0bmfzr6956v9r69_7_59k8l00000gn/T/hub-carlet-dev-6be6a.json
[debug] [2025-11-10T17:59:11.190Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2025-11-10T17:59:11.190Z] Ignoring unsupported arg: single_project_mode_error {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: single_project_mode_error"}}
[debug] [2025-11-10T17:59:11.191Z] Starting Firestore Emulator with command {"binary":"java","args":["-Dgoogle.cloud_firestore.debug_log_level=FINE","-Duser.language=en","-jar","/Users/techolosh/.cache/firebase/emulators/cloud-firestore-emulator-v1.19.8.jar","--host","0.0.0.0","--port",8085,"--websocket_port",9150,"--project_id","carlet-dev-6be6a","--rules","/Users/techolosh/development/projects/carlet/firestore.rules","--single_project_mode",true],"optionalArgs":["port","webchannel_port","host","rules","websocket_port","functions_emulator","seed_from_export","project_id","single_project_mode"],"joinArgs":false,"shell":false,"port":8085} {"metadata":{"emulator":{"name":"firestore"},"message":"Starting Firestore Emulator with command {\"binary\":\"java\",\"args\":[\"-Dgoogle.cloud_firestore.debug_log_level=FINE\",\"-Duser.language=en\",\"-jar\",\"/Users/techolosh/.cache/firebase/emulators/cloud-firestore-emulator-v1.19.8.jar\",\"--host\",\"0.0.0.0\",\"--port\",8085,\"--websocket_port\",9150,\"--project_id\",\"carlet-dev-6be6a\",\"--rules\",\"/Users/techolosh/development/projects/carlet/firestore.rules\",\"--single_project_mode\",true],\"optionalArgs\":[\"port\",\"webchannel_port\",\"host\",\"rules\",\"websocket_port\",\"functions_emulator\",\"seed_from_export\",\"project_id\",\"single_project_mode\"],\"joinArgs\":false,\"shell\":false,\"port\":8085}"}}
[info] i  firestore: Firestore Emulator logging to firestore-debug.log {"metadata":{"emulator":{"name":"firestore"},"message":"Firestore Emulator logging to firestore-debug.log"}}
[debug] [2025-11-10T17:59:12.030Z] WARNING: A terminally deprecated method in sun.misc.Unsafe has been called
WARNING: sun.misc.Unsafe::objectFieldOffset has been called by io.netty.util.internal.PlatformDependent0$4 (file:/Users/techolosh/.cache/firebase/emulators/cloud-firestore-emulator-v1.19.8.jar)
WARNING: Please consider reporting this to the maintainers of class io.netty.util.internal.PlatformDependent0$4
WARNING: sun.misc.Unsafe::objectFieldOffset will be removed in a future release
 {"metadata":{"emulator":{"name":"firestore"},"message":"WARNING: A terminally deprecated method in sun.misc.Unsafe has been called\nWARNING: sun.misc.Unsafe::objectFieldOffset has been called by io.netty.util.internal.PlatformDependent0$4 (file:/Users/techolosh/.cache/firebase/emulators/cloud-firestore-emulator-v1.19.8.jar)\nWARNING: Please consider reporting this to the maintainers of class io.netty.util.internal.PlatformDependent0$4\nWARNING: sun.misc.Unsafe::objectFieldOffset will be removed in a future release\n"}}
[debug] [2025-11-10T17:59:13.818Z] Nov 10, 2025 7:59:13 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketServer start
INFO: Started WebSocket server on ws://0.0.0.0:9150
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 7:59:13 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketServer start\nINFO: Started WebSocket server on ws://0.0.0.0:9150\n"}}
[debug] [2025-11-10T17:59:13.878Z] API endpoint: http://0.0.0.0:8085
If you are using a library that supports the FIRESTORE_EMULATOR_HOST environment variable, run:

   export FIRESTORE_EMULATOR_HOST=0.0.0.0:8085

If you are running a Firestore in Datastore Mode project, run:

   export DATASTORE_EMULATOR_HOST=0.0.0.0:8085

Note: Support for Datastore Mode is in preview. If you encounter any bugs please file at https://github.com/firebase/firebase-tools/issues.
Dev App Server is now running.

 {"metadata":{"emulator":{"name":"firestore"},"message":"API endpoint: http://0.0.0.0:8085\nIf you are using a library that supports the FIRESTORE_EMULATOR_HOST environment variable, run:\n\n   export FIRESTORE_EMULATOR_HOST=0.0.0.0:8085\n\nIf you are running a Firestore in Datastore Mode project, run:\n\n   export DATASTORE_EMULATOR_HOST=0.0.0.0:8085\n\nNote: Support for Datastore Mode is in preview. If you encounter any bugs please file at https://github.com/firebase/firebase-tools/issues.\nDev App Server is now running.\n\n"}}
[info] ✔  firestore: Firestore Emulator UI websocket is running on 9150. {"metadata":{"emulator":{"name":"firestore"},"message":"Firestore Emulator UI websocket is running on 9150."}}
[debug] [2025-11-10T17:59:22.853Z] Ignoring unsupported arg: port {"metadata":{"emulator":{"name":"storage"},"message":"Ignoring unsupported arg: port"}}
[warn] ⚠  Unexpected rules runtime error: WARNING: A terminally deprecated method in sun.misc.Unsafe has been called
WARNING: sun.misc.Unsafe::arrayBaseOffset has been called by com.google.protobuf.UnsafeUtil$MemoryAccessor (file:/Users/techolosh/.cache/firebase/emulators/cloud-storage-rules-runtime-v1.1.3.jar)
WARNING: Please consider reporting this to the maintainers of class com.google.protobuf.UnsafeUtil$MemoryAccessor
WARNING: sun.misc.Unsafe::arrayBaseOffset will be removed in a future release
 {"metadata":{"emulator":{"name":"storage"},"message":"Unexpected rules runtime error: WARNING: A terminally deprecated method in sun.misc.Unsafe has been called\nWARNING: sun.misc.Unsafe::arrayBaseOffset has been called by com.google.protobuf.UnsafeUtil$MemoryAccessor (file:/Users/techolosh/.cache/firebase/emulators/cloud-storage-rules-runtime-v1.1.3.jar)\nWARNING: Please consider reporting this to the maintainers of class com.google.protobuf.UnsafeUtil$MemoryAccessor\nWARNING: sun.misc.Unsafe::arrayBaseOffset will be removed in a future release\n"}}
[debug] [2025-11-10T17:59:24.354Z] Temp file directory for storage emulator: /var/folders/5z/0bmfzr6956v9r69_7_59k8l00000gn/T/firebase/storage/blobs {"metadata":{"emulator":{"name":"storage"},"message":"Temp file directory for storage emulator: /var/folders/5z/0bmfzr6956v9r69_7_59k8l00000gn/T/firebase/storage/blobs"}}
[debug] [2025-11-10T17:59:24.369Z] Could not find VSCode notification endpoint: FetchError: request to http://localhost:40001/vscode/notify failed, reason: . If you are not running the Firebase Data Connect VSCode extension, this is expected and not an issue.
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://127.0.0.1:4005/               │
└─────────────────────────────────────────────────────────────┘

┌────────────────┬──────────────┬─────────────────────────────────┐
│ Emulator       │ Host:Port    │ View in Emulator UI             │
├────────────────┼──────────────┼─────────────────────────────────┤
│ Authentication │ 0.0.0.0:9098 │ http://127.0.0.1:4005/auth      │
├────────────────┼──────────────┼─────────────────────────────────┤
│ Firestore      │ 0.0.0.0:8085 │ http://127.0.0.1:4005/firestore │
├────────────────┼──────────────┼─────────────────────────────────┤
│ Storage        │ 0.0.0.0:9198 │ http://127.0.0.1:4005/storage   │
└────────────────┴──────────────┴─────────────────────────────────┘
  Emulator Hub host: 127.0.0.1 port: 4401
  Other reserved ports: 4501, 9150

Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2025-11-10T18:00:07.983Z] Nov 10, 2025 8:00:07 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel
INFO: Connected to new websocket client
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:00:07 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel\nINFO: Connected to new websocket client\n"}}
[debug] [2025-11-10T18:02:42.610Z] Nov 10, 2025 8:02:42 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:02:42 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[info] i  To verify the phone number +27717662280, use the code 043947. {"metadata":{"emulator":{"name":"auth"},"message":"To verify the phone number +27717662280, use the code 043947."}}
[debug] [2025-11-10T18:04:06.848Z] Nov 10, 2025 8:04:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:04:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:04:06.983Z] Nov 10, 2025 8:04:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:04:06 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:04:07.101Z] Nov 10, 2025 8:04:07 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:04:07 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:07:02.547Z] Nov 10, 2025 8:07:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:07:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[info] i  firestore: Change detected, updating rules... 
[debug] [2025-11-10T18:11:59.325Z] >>> [apiv2][query] PUT http://127.0.0.1:8085/emulator/v1/projects/carlet-dev-6be6a:securityRules [none]
[debug] [2025-11-10T18:11:59.326Z] >>> [apiv2][body] PUT http://127.0.0.1:8085/emulator/v1/projects/carlet-dev-6be6a:securityRules {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Users collection: allow authenticated users to read their own doc and\n    // create/update it. Once `onboardingComplete` is set to true on the\n    // existing document, vehicle fields become immutable.\n    match /users/{userId} {\n      allow read: if request.auth != null;\n\n      // Create: authenticated user may create their own document. If the\n      // client sets onboardingComplete=true on create, require vehicle fields\n      // to be present and non-empty. Avoid use of keys().hasAny/hasAll to\n      // reduce rule evaluation complexity.\n      allow create: if request.auth != null && request.auth.uid == userId && (\n        // If onboardingComplete is not being set to true on create, allow.\n        !(request.resource.data.onboardingComplete == true)\n        ||\n        // If onboardingComplete is true on create, require all vehicle fields\n        (request.resource.data.onboardingComplete == true &&\n          request.resource.data.carMake is string && request.resource.data.carMake != '' &&\n          request.resource.data.carModel is string && request.resource.data.carModel != '' &&\n          request.resource.data.carColor is string && request.resource.data.carColor != '' &&\n          request.resource.data.carPlate is string && request.resource.data.carPlate != ''\n        )\n      );\n\n      // Update: authenticated user may update their own document with\n      // constraints around onboardingComplete and vehicle fields.\n      allow update: if request.auth != null && request.auth.uid == userId && (\n        // Case A: onboarding was already completed previously -> vehicle\n        // fields must not change and onboardingComplete must remain true.\n        (resource.data.onboardingComplete == true &&\n          // If the request includes a new value for a vehicle field, it\n          // must equal the existing value. Accessing a missing field will\n          // yield null, so we allow null (meaning not present) or equality.\n          (request.resource.data.carMake == resource.data.carMake || request.resource.data.carMake == null) &&\n          (request.resource.data.carModel == resource.data.carModel || request.resource.data.carModel == null) &&\n          (request.resource.data.carColor == resource.data.carColor || request.resource.data.carColor == null) &&\n          (request.resource.data.carPlate == resource.data.carPlate || request.resource.data.carPlate == null) &&\n          // Ensure onboardingComplete is not being turned off\n          (request.resource.data.onboardingComplete == resource.data.onboardingComplete || request.resource.data.onboardingComplete == null)\n        )\n        ||\n        // Case B: onboarding was NOT completed previously -> allow updates,\n        // but if the client is setting onboardingComplete=true in this\n        // update, require vehicle fields to be present and non-empty.\n        (resource.data.onboardingComplete != true && (\n          // If onboardingComplete is not being set to true in this\n          // update, allow the update. Otherwise, require vehicle fields.\n          !(request.resource.data.onboardingComplete == true)\n          ||\n          (request.resource.data.onboardingComplete == true &&\n            request.resource.data.carMake is string && request.resource.data.carMake != '' &&\n            request.resource.data.carModel is string && request.resource.data.carModel != '' &&\n            request.resource.data.carColor is string && request.resource.data.carColor != '' &&\n            request.resource.data.carPlate is string && request.resource.data.carPlate != ''\n          )\n        ))\n      );\n\n      // For safety do not allow client-side deletes\n      allow delete: if false;\n    }\n\n    // Fallback: allow reads but deny writes for other documents by default.\n    // Adjust rules below to open more access where necessary (e.g. reports\n    // or other collections) with least privilege in mind.\n    // Reports collection: allow authenticated users to create reports. Allow\n    // vehicle owners (whose `users/{uid}.carPlate` matches the report's\n    // `licensePlate`) to mark a report as resolved.\n    match /reports/{reportId} {\n      // Public feed\n      allow read: if true;\n\n      // Create: authenticated user can create a report. Validate minimal\n      // required fields and basic types. Require reporterId == auth.uid and\n      // initial status to be 'open'. User cannot report their own car.\n      allow create: if request.auth != null &&\n        request.resource.data.reporterId == request.auth.uid &&\n        request.resource.data.keys().hasAll(['reporterId','status','timestamp']) &&\n        request.resource.data.status == 'open' &&\n        // Prevent users from reporting their own car\n        (\n          !request.resource.data.keys().hasAny(['licensePlate']) ||\n          !get(/databases/$(database)/documents/users/$(request.auth.uid)).data.keys().hasAny(['carPlate']) ||\n          (\n            request.resource.data.licensePlate.toLowerCase().replace(' ', '') != \n            get(/databases/$(database)/documents/users/$(request.auth.uid)).data.carPlate.toLowerCase().replace(' ', '')\n          )\n        );\n\n      // Update: allow two types of updates:\n      // 1. Vehicle owner can mark as 'resolved'\n      // 2. Any authenticated user can update social engagement fields (likes, comments)\n      allow update: if request.auth != null && (\n        // Case 1: Owner marking as resolved\n        (\n          // Owner condition: user's carPlate exists and matches report licensePlate\n          get(/databases/$(database)/documents/users/$(request.auth.uid)).data.carPlate is string\n          && resource.data.licensePlate is string\n          && (\n            // Prefer direct equality, otherwise compare lowercased versions\n            get(/databases/$(database)/documents/users/$(request.auth.uid)).data.carPlate == resource.data.licensePlate\n            || get(/databases/$(database)/documents/users/$(request.auth.uid)).data.carPlate.toLowerCase() == resource.data.licensePlate.toLowerCase()\n          )\n          &&\n          // The request must set status to 'resolved'\n          request.resource.data.keys().hasAny(['status']) && request.resource.data.status == 'resolved'\n          &&\n          // And must not modify other fields (if present they must equal existing values)\n          (\n            (!request.resource.data.keys().hasAny(['reporterId']) || request.resource.data.reporterId == resource.data.reporterId) &&\n            (!request.resource.data.keys().hasAny(['photoUrl']) || request.resource.data.photoUrl == resource.data.photoUrl) &&\n            (!request.resource.data.keys().hasAny(['licensePlate']) || request.resource.data.licensePlate == resource.data.licensePlate) &&\n            (!request.resource.data.keys().hasAny(['message']) || request.resource.data.message == resource.data.message) &&\n            (!request.resource.data.keys().hasAny(['timestamp']) || request.resource.data.timestamp == resource.data.timestamp) &&\n            (!request.resource.data.keys().hasAny(['anonymous']) || request.resource.data.anonymous == resource.data.anonymous)\n          )\n        )\n        ||\n        // Case 2: Updating social engagement fields (likes, comments)\n        // Only allow updating likeCount, commentCount, and likedBy\n        // Ensure no other critical fields are modified\n        (\n          resource.data.status == 'open' && // Can only like/comment on open reports\n          // Only social engagement fields can be updated\n          (\n            request.resource.data.keys().hasOnly(['likeCount', 'commentCount', 'likedBy', \n              'reporterId', 'photoUrl', 'licensePlate', 'message', 'status', 'timestamp', 'anonymous'])\n          ) &&\n          // Core fields must not change\n          request.resource.data.reporterId == resource.data.reporterId &&\n          request.resource.data.status == resource.data.status &&\n          request.resource.data.timestamp == resource.data.timestamp &&\n          (!request.resource.data.keys().hasAny(['photoUrl']) || request.resource.data.photoUrl == resource.data.photoUrl) &&\n          (!request.resource.data.keys().hasAny(['licensePlate']) || request.resource.data.licensePlate == resource.data.licensePlate) &&\n          (!request.resource.data.keys().hasAny(['message']) || request.resource.data.message == resource.data.message) &&\n          (!request.resource.data.keys().hasAny(['anonymous']) || request.resource.data.anonymous == resource.data.anonymous)\n        )\n      );\n\n      // Do not allow client deletions\n      allow delete: if false;\n    }\n\n    // Comments collection: allow authenticated users to create and manage comments\n    match /comments/{commentId} {\n      // Anyone can read comments (public)\n      allow read: if true;\n\n      // Create: authenticated user can create a comment\n      // Must set userId to their own auth.uid and provide required fields\n      allow create: if request.auth != null &&\n        request.resource.data.userId == request.auth.uid &&\n        request.resource.data.keys().hasAll(['reportId', 'userId', 'text', 'timestamp']) &&\n        request.resource.data.reportId is string &&\n        request.resource.data.text is string &&\n        request.resource.data.timestamp is timestamp;\n\n      // Update: authenticated user can update reactions on any comment\n      // or delete their own comment by updating it\n      allow update: if request.auth != null && (\n        // Can update reactions map only\n        request.resource.data.keys().hasOnly(['id', 'reportId', 'userId', 'userName', \n          'userPhotoUrl', 'text', 'parentCommentId', 'reactions', 'timestamp']) &&\n        request.resource.data.reportId == resource.data.reportId &&\n        request.resource.data.userId == resource.data.userId &&\n        request.resource.data.text == resource.data.text &&\n        request.resource.data.timestamp == resource.data.timestamp &&\n        (!request.resource.data.keys().hasAny(['parentCommentId']) || \n          request.resource.data.parentCommentId == resource.data.parentCommentId)\n      );\n\n      // Delete: only the comment author can delete their own comment\n      allow delete: if request.auth != null && \n        request.auth.uid == resource.data.userId;\n    }\n\n    match /{document=**} {\n      allow read: if true;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2025-11-10T18:11:59.354Z] Nov 10, 2025 8:11:59 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:11:59 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:12:00.042Z] <<< [apiv2][status] PUT http://127.0.0.1:8085/emulator/v1/projects/carlet-dev-6be6a:securityRules 200
[debug] [2025-11-10T18:12:00.042Z] <<< [apiv2][body] PUT http://127.0.0.1:8085/emulator/v1/projects/carlet-dev-6be6a:securityRules {"issues":[{"sourcePosition":{"fileName":"security.rules","line":87,"column":48,"currentOffset":5045,"endOffset":5055},"description":"Invalid function name: toLowerCase.","severity":"WARNING"},{"sourcePosition":{"fileName":"security.rules","line":88,"column":91,"currentOffset":5170,"endOffset":5180},"description":"Invalid function name: toLowerCase.","severity":"WARNING"},{"sourcePosition":{"fileName":"security.rules","line":104,"column":94,"currentOffset":6050,"endOffset":6060},"description":"Invalid function name: toLowerCase.","severity":"WARNING"},{"sourcePosition":{"fileName":"security.rules","line":104,"column":138,"currentOffset":6094,"endOffset":6104},"description":"Invalid function name: toLowerCase.","severity":"WARNING"}]}
[warn] ⚠  ../../firestore.rules:87:48 - WARNING Invalid function name: toLowerCase. 
[warn] ⚠  ../../firestore.rules:88:91 - WARNING Invalid function name: toLowerCase. 
[warn] ⚠  ../../firestore.rules:104:94 - WARNING Invalid function name: toLowerCase. 
[warn] ⚠  ../../firestore.rules:104:138 - WARNING Invalid function name: toLowerCase. 
[info] ✔  firestore: Rules updated. 
[debug] [2025-11-10T18:14:26.496Z] Nov 10, 2025 8:14:26 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:14:26 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[info] i  firestore: Change detected, updating rules... 
[debug] [2025-11-10T18:14:59.129Z] >>> [apiv2][query] PUT http://127.0.0.1:8085/emulator/v1/projects/carlet-dev-6be6a:securityRules [none]
[debug] [2025-11-10T18:14:59.129Z] >>> [apiv2][body] PUT http://127.0.0.1:8085/emulator/v1/projects/carlet-dev-6be6a:securityRules {"ignore_errors":true,"rules":{"files":[{"name":"security.rules","content":"rules_version = '2';\nservice cloud.firestore {\n  match /databases/{database}/documents {\n    // Users collection: allow authenticated users to read their own doc and\n    // create/update it. Once `onboardingComplete` is set to true on the\n    // existing document, vehicle fields become immutable.\n    match /users/{userId} {\n      allow read: if request.auth != null;\n\n      // Create: authenticated user may create their own document. If the\n      // client sets onboardingComplete=true on create, require vehicle fields\n      // to be present and non-empty. Avoid use of keys().hasAny/hasAll to\n      // reduce rule evaluation complexity.\n      allow create: if request.auth != null && request.auth.uid == userId && (\n        // If onboardingComplete is not being set to true on create, allow.\n        !(request.resource.data.onboardingComplete == true)\n        ||\n        // If onboardingComplete is true on create, require all vehicle fields\n        (request.resource.data.onboardingComplete == true &&\n          request.resource.data.carMake is string && request.resource.data.carMake != '' &&\n          request.resource.data.carModel is string && request.resource.data.carModel != '' &&\n          request.resource.data.carColor is string && request.resource.data.carColor != '' &&\n          request.resource.data.carPlate is string && request.resource.data.carPlate != ''\n        )\n      );\n\n      // Update: authenticated user may update their own document with\n      // constraints around onboardingComplete and vehicle fields.\n      allow update: if request.auth != null && request.auth.uid == userId && (\n        // Case A: onboarding was already completed previously -> vehicle\n        // fields must not change and onboardingComplete must remain true.\n        (resource.data.onboardingComplete == true &&\n          // If the request includes a new value for a vehicle field, it\n          // must equal the existing value. Accessing a missing field will\n          // yield null, so we allow null (meaning not present) or equality.\n          (request.resource.data.carMake == resource.data.carMake || request.resource.data.carMake == null) &&\n          (request.resource.data.carModel == resource.data.carModel || request.resource.data.carModel == null) &&\n          (request.resource.data.carColor == resource.data.carColor || request.resource.data.carColor == null) &&\n          (request.resource.data.carPlate == resource.data.carPlate || request.resource.data.carPlate == null) &&\n          // Ensure onboardingComplete is not being turned off\n          (request.resource.data.onboardingComplete == resource.data.onboardingComplete || request.resource.data.onboardingComplete == null)\n        )\n        ||\n        // Case B: onboarding was NOT completed previously -> allow updates,\n        // but if the client is setting onboardingComplete=true in this\n        // update, require vehicle fields to be present and non-empty.\n        (resource.data.onboardingComplete != true && (\n          // If onboardingComplete is not being set to true in this\n          // update, allow the update. Otherwise, require vehicle fields.\n          !(request.resource.data.onboardingComplete == true)\n          ||\n          (request.resource.data.onboardingComplete == true &&\n            request.resource.data.carMake is string && request.resource.data.carMake != '' &&\n            request.resource.data.carModel is string && request.resource.data.carModel != '' &&\n            request.resource.data.carColor is string && request.resource.data.carColor != '' &&\n            request.resource.data.carPlate is string && request.resource.data.carPlate != ''\n          )\n        ))\n      );\n\n      // For safety do not allow client-side deletes\n      allow delete: if false;\n    }\n\n    // Fallback: allow reads but deny writes for other documents by default.\n    // Adjust rules below to open more access where necessary (e.g. reports\n    // or other collections) with least privilege in mind.\n    // Reports collection: allow authenticated users to create reports. Allow\n    // vehicle owners (whose `users/{uid}.carPlate` matches the report's\n    // `licensePlate`) to mark a report as resolved.\n    match /reports/{reportId} {\n      // Public feed\n      allow read: if true;\n\n      // Create: authenticated user can create a report. Validate minimal\n      // required fields and basic types. Require reporterId == auth.uid and\n      // initial status to be 'open'. User cannot report their own car.\n      allow create: if request.auth != null &&\n        request.resource.data.reporterId == request.auth.uid &&\n        request.resource.data.keys().hasAll(['reporterId','status','timestamp']) &&\n        request.resource.data.status == 'open' &&\n        // Prevent users from reporting their own car\n        (\n          !request.resource.data.keys().hasAny(['licensePlate']) ||\n          !get(/databases/$(database)/documents/users/$(request.auth.uid)).data.keys().hasAny(['carPlate']) ||\n          (\n            request.resource.data.licensePlate.toLowerCase().replace(' ', '') != \n            get(/databases/$(database)/documents/users/$(request.auth.uid)).data.carPlate.toLowerCase().replace(' ', '')\n          )\n        );\n\n      // Update: allow two types of updates:\n      // 1. Vehicle owner can mark as 'resolved'\n      // 2. Any authenticated user can update social engagement fields (likes, comments)\n      allow update: if request.auth != null && (\n        // Case 1: Owner marking as resolved\n        (\n          // Owner condition: user's carPlate exists and matches report licensePlate\n          get(/databases/$(database)/documents/users/$(request.auth.uid)).data.carPlate is string\n          && resource.data.licensePlate is string\n          && (\n            // Prefer direct equality, otherwise compare lowercased versions\n            get(/databases/$(database)/documents/users/$(request.auth.uid)).data.carPlate == resource.data.licensePlate\n            || get(/databases/$(database)/documents/users/$(request.auth.uid)).data.carPlate.toLowerCase() == resource.data.licensePlate.toLowerCase()\n          )\n          &&\n          // The request must set status to 'resolved'\n          request.resource.data.keys().hasAny(['status']) && request.resource.data.status == 'resolved'\n          &&\n          // And must not modify other fields (if present they must equal existing values)\n          (\n            (!request.resource.data.keys().hasAny(['reporterId']) || request.resource.data.reporterId == resource.data.reporterId) &&\n            (!request.resource.data.keys().hasAny(['photoUrl']) || request.resource.data.photoUrl == resource.data.photoUrl) &&\n            (!request.resource.data.keys().hasAny(['licensePlate']) || request.resource.data.licensePlate == resource.data.licensePlate) &&\n            (!request.resource.data.keys().hasAny(['message']) || request.resource.data.message == resource.data.message) &&\n            (!request.resource.data.keys().hasAny(['timestamp']) || request.resource.data.timestamp == resource.data.timestamp) &&\n            (!request.resource.data.keys().hasAny(['anonymous']) || request.resource.data.anonymous == resource.data.anonymous)\n          )\n        )\n        ||\n        // Case 2: Updating social engagement fields (likes, comments)\n        // Only allow updating likeCount, commentCount, and likedBy\n        // Ensure no other critical fields are modified\n        (\n          resource.data.status == 'open' && // Can only like/comment on open reports\n          // Only social engagement fields can be updated\n          (\n            request.resource.data.keys().hasOnly(['likeCount', 'commentCount', 'likedBy', \n              'reporterId', 'photoUrl', 'licensePlate', 'message', 'status', 'timestamp', 'anonymous'])\n          ) &&\n          // Core fields must not change\n          request.resource.data.reporterId == resource.data.reporterId &&\n          request.resource.data.status == resource.data.status &&\n          request.resource.data.timestamp == resource.data.timestamp &&\n          (!request.resource.data.keys().hasAny(['photoUrl']) || request.resource.data.photoUrl == resource.data.photoUrl) &&\n          (!request.resource.data.keys().hasAny(['licensePlate']) || request.resource.data.licensePlate == resource.data.licensePlate) &&\n          (!request.resource.data.keys().hasAny(['message']) || request.resource.data.message == resource.data.message) &&\n          (!request.resource.data.keys().hasAny(['anonymous']) || request.resource.data.anonymous == resource.data.anonymous)\n        )\n      );\n\n      // Do not allow client deletions\n      allow delete: if false;\n    }\n\n    // Comments collection: allow authenticated users to create and manage comments\n    match /comments/{commentId} {\n      // Anyone can read comments (public)\n      allow read: if true;\n\n      // Create: authenticated user can create a comment\n      // Must set userId to their own auth.uid and provide required fields\n      allow create: if request.auth != null &&\n        request.resource.data.userId == request.auth.uid &&\n        request.resource.data.keys().hasAll(['reportId', 'userId', 'text', 'timestamp']) &&\n        request.resource.data.reportId is string &&\n        request.resource.data.text is string &&\n        request.resource.data.timestamp is timestamp;\n\n      // Update: authenticated user can update reactions on any comment\n      // or delete their own comment by updating it\n      allow update: if request.auth != null && (\n        // Can update reactions map only\n        request.resource.data.keys().hasOnly(['id', 'reportId', 'userId', 'userName', \n          'userPhotoUrl', 'text', 'parentCommentId', 'reactions', 'timestamp']) &&\n        request.resource.data.reportId == resource.data.reportId &&\n        request.resource.data.userId == resource.data.userId &&\n        request.resource.data.text == resource.data.text &&\n        request.resource.data.timestamp == resource.data.timestamp &&\n        (!request.resource.data.keys().hasAny(['parentCommentId']) || \n          request.resource.data.parentCommentId == resource.data.parentCommentId)\n      );\n\n      // Delete: only the comment author can delete their own comment\n      allow delete: if request.auth != null && \n        request.auth.uid == resource.data.userId;\n    }\n\n    match /{document=**} {\n      allow read: if true;\n      allow write: if false;\n    }\n  }\n}\n"}]}}
[debug] [2025-11-10T18:14:59.134Z] Nov 10, 2025 8:14:59 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:14:59 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:14:59.397Z] <<< [apiv2][status] PUT http://127.0.0.1:8085/emulator/v1/projects/carlet-dev-6be6a:securityRules 200
[debug] [2025-11-10T18:14:59.397Z] <<< [apiv2][body] PUT http://127.0.0.1:8085/emulator/v1/projects/carlet-dev-6be6a:securityRules {"issues":[{"sourcePosition":{"fileName":"security.rules","line":87,"column":48,"currentOffset":5045,"endOffset":5055},"description":"Invalid function name: toLowerCase.","severity":"WARNING"},{"sourcePosition":{"fileName":"security.rules","line":88,"column":91,"currentOffset":5170,"endOffset":5180},"description":"Invalid function name: toLowerCase.","severity":"WARNING"},{"sourcePosition":{"fileName":"security.rules","line":104,"column":94,"currentOffset":6050,"endOffset":6060},"description":"Invalid function name: toLowerCase.","severity":"WARNING"},{"sourcePosition":{"fileName":"security.rules","line":104,"column":138,"currentOffset":6094,"endOffset":6104},"description":"Invalid function name: toLowerCase.","severity":"WARNING"}]}
[warn] ⚠  ../../firestore.rules:87:48 - WARNING Invalid function name: toLowerCase. 
[warn] ⚠  ../../firestore.rules:88:91 - WARNING Invalid function name: toLowerCase. 
[warn] ⚠  ../../firestore.rules:104:94 - WARNING Invalid function name: toLowerCase. 
[warn] ⚠  ../../firestore.rules:104:138 - WARNING Invalid function name: toLowerCase. 
[info] ✔  firestore: Rules updated. 
[debug] [2025-11-10T18:18:01.097Z] Nov 10, 2025 8:18:01 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:18:01 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:18:01.990Z] Nov 10, 2025 8:18:01 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:18:01 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:18:09.164Z] Nov 10, 2025 8:18:09 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:18:09 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:18:09.195Z] Nov 10, 2025 8:18:09 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:18:09 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:18:47.987Z] Nov 10, 2025 8:18:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:18:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:18:48.173Z] Nov 10, 2025 8:18:48 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel
INFO: Connected to new websocket client
Nov 10, 2025 8:18:48 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler channelClosed
INFO: Websocket client disconnected
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:18:48 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel\nINFO: Connected to new websocket client\nNov 10, 2025 8:18:48 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler channelClosed\nINFO: Websocket client disconnected\n"}}
[debug] [2025-11-10T18:18:49.164Z] Nov 10, 2025 8:18:49 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:18:49 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:18:50.806Z] Nov 10, 2025 8:18:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:18:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:18:51.629Z] Nov 10, 2025 8:18:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:18:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:19:07.854Z] Nov 10, 2025 8:19:07 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:19:07 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:19:07.870Z] Nov 10, 2025 8:19:07 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:19:07 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:20:08.254Z] Nov 10, 2025 8:20:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:20:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:21:08.309Z] Nov 10, 2025 8:21:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:21:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:21:53.943Z] Nov 10, 2025 8:21:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:21:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:22:00.587Z] Nov 10, 2025 8:22:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
Nov 10, 2025 8:22:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:22:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\nNov 10, 2025 8:22:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:22:00.733Z] Nov 10, 2025 8:22:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:22:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:22:53.981Z] Nov 10, 2025 8:22:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:22:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:23:54.007Z] Nov 10, 2025 8:23:54 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:23:54 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:24:54.026Z] Nov 10, 2025 8:24:54 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:24:54 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:25:41.986Z] Nov 10, 2025 8:25:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:25:41 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:26:42.017Z] Nov 10, 2025 8:26:42 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:26:42 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:26:42.403Z] Nov 10, 2025 8:26:42 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:26:42 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:27:42.035Z] Nov 10, 2025 8:27:42 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:27:42 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:28:28.024Z] Nov 10, 2025 8:28:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:28:28 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:29:43.986Z] Nov 10, 2025 8:29:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:29:43 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:31:00.020Z] Nov 10, 2025 8:30:59 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:30:59 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:32:00.095Z] Nov 10, 2025 8:32:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:32:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:33:00.372Z] Nov 10, 2025 8:33:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:33:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:34:00.478Z] Nov 10, 2025 8:34:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:34:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:35:00.511Z] Nov 10, 2025 8:35:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:35:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:36:00.539Z] Nov 10, 2025 8:36:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:36:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:37:00.577Z] Nov 10, 2025 8:37:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:37:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:38:00.629Z] Nov 10, 2025 8:38:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:38:00 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:38:45.996Z] Nov 10, 2025 8:38:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:38:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:39:46.023Z] Nov 10, 2025 8:39:46 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:39:46 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:40:46.044Z] Nov 10, 2025 8:40:46 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:40:46 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:41:46.065Z] Nov 10, 2025 8:41:46 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:41:46 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:42:31.991Z] Nov 10, 2025 8:42:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:42:31 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:43:32.012Z] Nov 10, 2025 8:43:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:43:32 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:44:17.995Z] Nov 10, 2025 8:44:17 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:44:17 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:45:18.013Z] Nov 10, 2025 8:45:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:45:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:46:18.053Z] Nov 10, 2025 8:46:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:46:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:46:45.022Z] Nov 10, 2025 8:46:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:46:45 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:47:18.083Z] Nov 10, 2025 8:47:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:47:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:48:18.104Z] Nov 10, 2025 8:48:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:48:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:49:18.122Z] Nov 10, 2025 8:49:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:49:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:50:18.237Z] Nov 10, 2025 8:50:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:50:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:51:18.275Z] Nov 10, 2025 8:51:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:51:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:52:18.326Z] Nov 10, 2025 8:52:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:52:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:53:18.390Z] Nov 10, 2025 8:53:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:53:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:54:34.596Z] Nov 10, 2025 8:54:34 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:54:34 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:55:20.000Z] Nov 10, 2025 8:55:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:55:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:55:47.023Z] Nov 10, 2025 8:55:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:55:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:55:47.027Z] Nov 10, 2025 8:55:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:55:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:55:47.031Z] Nov 10, 2025 8:55:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:55:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:55:47.104Z] Nov 10, 2025 8:55:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:55:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:55:48.638Z] Nov 10, 2025 8:55:48 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler channelClosed
INFO: Websocket client disconnected
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:55:48 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler channelClosed\nINFO: Websocket client disconnected\n"}}
[debug] [2025-11-10T18:55:49.428Z] Nov 10, 2025 8:55:49 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel
INFO: Connected to new websocket client
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:55:49 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel\nINFO: Connected to new websocket client\n"}}
[debug] [2025-11-10T18:55:49.744Z] Nov 10, 2025 8:55:49 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:55:49 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:55:49.916Z] Nov 10, 2025 8:55:49 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:55:49 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:55:50.250Z] Nov 10, 2025 8:55:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:55:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:55:53.174Z] Nov 10, 2025 8:55:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:55:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:55:53.300Z] Nov 10, 2025 8:55:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:55:53 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:55:55.664Z] Nov 10, 2025 8:55:55 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:55:55 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:56:02.241Z] Nov 10, 2025 8:56:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:56:02 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:56:02.575Z] Nov 10, 2025 8:56:02 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose
INFO: channel closed
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:56:02 PM com.google.cloud.datastore.emulator.firestore.webchannel.FirestoreV1WebChannelAdapter$FirestoreListenHandler onClose\nINFO: channel closed\n"}}
[debug] [2025-11-10T18:56:08.797Z] Nov 10, 2025 8:56:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:56:08 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[info] i  To verify the phone number +27717662280, use the code 863651. {"metadata":{"emulator":{"name":"auth"},"message":"To verify the phone number +27717662280, use the code 863651."}}
[debug] [2025-11-10T18:56:52.175Z] Nov 10, 2025 8:56:52 PM io.grpc.internal.SerializingExecutor run
SEVERE: Exception while executing runnable io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1MessagesAvailable@493a7ba7
com.google.cloud.datastore.emulator.impl.util.StreamTransportClosedException: io.grpc.StatusRuntimeException: CANCELLED: call already cancelled. Use ServerCallStreamObserver.setOnCancelHandler() to disable this exception
	at com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver.onNext(WrappedStreamObserver.java:30)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1ListenStream.notifySynced(CloudFirestoreV1ListenStream.java:140)
	at com.google.cloud.datastore.emulator.impl.watch.ListenStreamManager.notifyListenersSynced(ListenStreamManager.java:269)
	at com.google.cloud.datastore.emulator.impl.watch.ListenStreamManager.notifyListeners(ListenStreamManager.java:77)
	at com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.commitHelper(FirestoreEmulatorHelper.java:377)
	at com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.internalCommit(FirestoreEmulatorHelper.java:314)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.internalCommit(CloudFirestoreV1.java:1077)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.write(CloudFirestoreV1.java:1065)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.handleRequest(CloudFirestoreV1WriteStream.java:218)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.write(CloudFirestoreV1WriteStream.java:140)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:95)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:27)
	at io.grpc.stub.ServerCalls$StreamingServerCallHandler$StreamingServerCallListener.onMessage(ServerCalls.java:262)
	at io.grpc.ForwardingServerCallListener.onMessage(ForwardingServerCallListener.java:33)
	at io.grpc.Contexts$ContextualizedServerCallListener.onMessage(Contexts.java:76)
	at io.grpc.ForwardingServerCallListener.onMessage(ForwardingServerCallListener.java:33)
	at io.grpc.Contexts$ContextualizedServerCallListener.onMessage(Contexts.java:76)
	at io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.messagesAvailableInternal(ServerCallImpl.java:334)
	at io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.messagesAvailable(ServerCallImpl.java:319)
	at io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1MessagesAvailable.runInContext(ServerImpl.java:834)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1095)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:619)
	at java.base/java.lang.Thread.run(Thread.java:1447)
Caused by: io.grpc.StatusRuntimeException: CANCELLED: call already cancelled. Use ServerCallStreamObserver.setOnCancelHandler() to disable this exception
	at io.grpc.Status.asRuntimeException(Status.java:524)
	at io.grpc.stub.ServerCalls$ServerCallStreamObserverImpl.onNext(ServerCalls.java:366)
	at com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver.onNext(WrappedStreamObserver.java:28)
	... 24 more

 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:56:52 PM io.grpc.internal.SerializingExecutor run\nSEVERE: Exception while executing runnable io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1MessagesAvailable@493a7ba7\ncom.google.cloud.datastore.emulator.impl.util.StreamTransportClosedException: io.grpc.StatusRuntimeException: CANCELLED: call already cancelled. Use ServerCallStreamObserver.setOnCancelHandler() to disable this exception\n\tat com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver.onNext(WrappedStreamObserver.java:30)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1ListenStream.notifySynced(CloudFirestoreV1ListenStream.java:140)\n\tat com.google.cloud.datastore.emulator.impl.watch.ListenStreamManager.notifyListenersSynced(ListenStreamManager.java:269)\n\tat com.google.cloud.datastore.emulator.impl.watch.ListenStreamManager.notifyListeners(ListenStreamManager.java:77)\n\tat com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.commitHelper(FirestoreEmulatorHelper.java:377)\n\tat com.google.cloud.datastore.emulator.impl.firestore.FirestoreEmulatorHelper.internalCommit(FirestoreEmulatorHelper.java:314)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.internalCommit(CloudFirestoreV1.java:1077)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.write(CloudFirestoreV1.java:1065)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.handleRequest(CloudFirestoreV1WriteStream.java:218)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.write(CloudFirestoreV1WriteStream.java:140)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:95)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1WriteStream.onNext(CloudFirestoreV1WriteStream.java:27)\n\tat io.grpc.stub.ServerCalls$StreamingServerCallHandler$StreamingServerCallListener.onMessage(ServerCalls.java:262)\n\tat io.grpc.ForwardingServerCallListener.onMessage(ForwardingServerCallListener.java:33)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onMessage(Contexts.java:76)\n\tat io.grpc.ForwardingServerCallListener.onMessage(ForwardingServerCallListener.java:33)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onMessage(Contexts.java:76)\n\tat io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.messagesAvailableInternal(ServerCallImpl.java:334)\n\tat io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.messagesAvailable(ServerCallImpl.java:319)\n\tat io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1MessagesAvailable.runInContext(ServerImpl.java:834)\n\tat io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\n\tat io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1095)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:619)\n\tat java.base/java.lang.Thread.run(Thread.java:1447)\nCaused by: io.grpc.StatusRuntimeException: CANCELLED: call already cancelled. Use ServerCallStreamObserver.setOnCancelHandler() to disable this exception\n\tat io.grpc.Status.asRuntimeException(Status.java:524)\n\tat io.grpc.stub.ServerCalls$ServerCallStreamObserverImpl.onNext(ServerCalls.java:366)\n\tat com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver.onNext(WrappedStreamObserver.java:28)\n\t... 24 more\n\n"}}
[debug] [2025-11-10T18:58:18.659Z] Nov 10, 2025 8:58:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:58:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:58:18.836Z] Nov 10, 2025 8:58:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:58:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:58:18.868Z] Nov 10, 2025 8:58:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:58:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:58:26.420Z] Nov 10, 2025 8:58:26 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:58:26 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:58:26.600Z] Nov 10, 2025 8:58:26 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:58:26 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:58:27.915Z] Nov 10, 2025 8:58:27 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:58:27 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] i  To verify the phone number +27717662280, use the code 798624. {"metadata":{"emulator":{"name":"auth"},"message":"To verify the phone number +27717662280, use the code 798624."}}
[debug] [2025-11-10T18:59:16.964Z] Nov 10, 2025 8:59:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:59:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:59:16.976Z] Nov 10, 2025 8:59:16 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler channelClosed
INFO: Websocket client disconnected
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:59:16 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler channelClosed\nINFO: Websocket client disconnected\n"}}
[debug] [2025-11-10T18:59:18.165Z] Nov 10, 2025 8:59:18 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel
INFO: Connected to new websocket client
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:59:18 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel\nINFO: Connected to new websocket client\n"}}
[debug] [2025-11-10T18:59:18.430Z] Nov 10, 2025 8:59:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:59:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:59:18.561Z] Nov 10, 2025 8:59:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:59:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:59:18.943Z] Nov 10, 2025 8:59:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:59:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:59:49.210Z] Nov 10, 2025 8:59:49 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler channelClosed
INFO: Websocket client disconnected
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:59:49 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler channelClosed\nINFO: Websocket client disconnected\n"}}
[debug] [2025-11-10T18:59:49.849Z] Nov 10, 2025 8:59:49 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel
INFO: Connected to new websocket client
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:59:49 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketChannelHandler initChannel\nINFO: Connected to new websocket client\n"}}
[debug] [2025-11-10T18:59:50.092Z] Nov 10, 2025 8:59:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:59:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:59:50.179Z] Nov 10, 2025 8:59:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:59:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T18:59:50.326Z] Nov 10, 2025 8:59:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 8:59:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T19:00:50.353Z] Nov 10, 2025 9:00:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 9:00:50 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T19:01:36.031Z] Nov 10, 2025 9:01:36 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 9:01:36 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T19:02:22.008Z] Nov 10, 2025 9:02:22 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 9:02:22 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T19:02:38.280Z] Nov 10, 2025 9:02:38 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 9:02:38 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[debug] [2025-11-10T19:03:22.041Z] Nov 10, 2025 9:03:22 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 9:03:22 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T19:04:38.031Z] Nov 10, 2025 9:04:38 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 9:04:38 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T19:05:38.064Z] Nov 10, 2025 9:05:38 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 9:05:38 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T19:05:47.234Z] Nov 10, 2025 9:05:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 9:05:47 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[debug] [2025-11-10T19:06:38.244Z] Nov 10, 2025 9:06:38 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 9:06:38 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T19:07:54.013Z] Nov 10, 2025 9:07:54 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 9:07:54 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T19:09:15.571Z] Nov 10, 2025 9:09:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 9:09:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T19:09:39.807Z] Nov 10, 2025 9:09:39 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 9:09:39 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[debug] [2025-11-10T19:10:14.710Z] Nov 10, 2025 9:10:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
Nov 10, 2025 9:10:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
Nov 10, 2025 9:10:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 9:10:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\nNov 10, 2025 9:10:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\nNov 10, 2025 9:10:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T19:10:15.587Z] Nov 10, 2025 9:10:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 9:10:15 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[info] i  To verify the phone number +27717662280, use the code 315682. {"metadata":{"emulator":{"name":"auth"},"message":"To verify the phone number +27717662280, use the code 315682."}}
[info] i  To verify the phone number +27717662280, use the code 168402. {"metadata":{"emulator":{"name":"auth"},"message":"To verify the phone number +27717662280, use the code 168402."}}
[debug] [2025-11-10T19:11:18.691Z] Nov 10, 2025 9:11:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 9:11:18 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2025-11-10T19:12:04.024Z] Nov 10, 2025 9:12:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Nov 10, 2025 9:12:04 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
